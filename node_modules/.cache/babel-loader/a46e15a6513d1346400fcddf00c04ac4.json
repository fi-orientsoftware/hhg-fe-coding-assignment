{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\aly.hanafi\\\\Downloads\\\\hhg-fe-coding-assignment\\\\hhg-fe-coding-assignment\\\\src\\\\pages\\\\Management\\\\index.tsx\",\n    _s = $RefreshSig$();\n\nimport { Breadcrumb, Form, message, Table } from \"antd\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { PAGE_SIZE } from \"../../constants\";\nimport { useFetchWithPagination, useMutation } from \"../../hook\";\nimport { addNewEmployee, listEmployees } from \"../../services/employeeServices\";\nimport columns from \"./columns\";\nimport AdditionEmployeeForm from \"./components/AdditionEmployeeForm\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Management = () => {\n  _s();\n\n  const [isAddingNewEmployee, setIsAddingNewEmployee] = useState(false);\n  const handleCloseModal = useCallback(() => {\n    setIsAddingNewEmployee(false);\n  }, [setIsAddingNewEmployee]);\n  const handleOpenModal = useCallback(() => {\n    setIsAddingNewEmployee(true);\n  }, [setIsAddingNewEmployee]); // fetch employees\n\n  const {\n    page,\n    setPage,\n    goToFirstPage,\n    isLoading,\n    data,\n    refetch: refetchEmployees\n  } = useFetchWithPagination(listEmployees);\n  const handleAfterAddNewEmployee = useCallback(() => {\n    if (page === 1) {\n      refetchEmployees();\n    } else {\n      goToFirstPage();\n    }\n  }, [goToFirstPage, refetchEmployees, page]);\n  const handleTableChange = useCallback(config => {\n    const {\n      current\n    } = config;\n    setPage(current);\n  }, [setPage]); // Add new employee\n\n  const [form] = Form.useForm();\n  const {\n    request: handleAddNewEmployee,\n    isLoading: isAddingEmployee\n  } = useMutation({\n    apiCallback: addNewEmployee,\n    onFailure: () => {\n      message.error(\"Add new employee fail!\");\n    },\n    onSuccess: useCallback(() => {\n      handleAfterAddNewEmployee();\n      message.success(\"Add new employee successfully!\");\n    }, [handleAfterAddNewEmployee]),\n    onFinish: () => {\n      form.resetFields();\n      handleCloseModal();\n    }\n  });\n  useEffect(() => {\n    document.title = \"Employee Management\";\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Breadcrumb, {\n      children: [/*#__PURE__*/_jsxDEV(Breadcrumb.Item, {\n        href: \"/\",\n        children: \"\\uD83C\\uDFE0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Breadcrumb.Item, {\n        children: \"Employees Management\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"management__table-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"management__table-header__title\",\n        children: \"Employees\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"btn--cta\",\n        onClick: handleOpenModal,\n        children: \"+ New\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Table, {\n      dataSource: data === null || data === void 0 ? void 0 : data.data,\n      loading: isLoading,\n      columns: columns,\n      pagination: {\n        pageSize: PAGE_SIZE,\n        total: (data === null || data === void 0 ? void 0 : data.total) || 0,\n        current: page,\n        showSizeChanger: false\n      },\n      size: \"small\",\n      onChange: handleTableChange,\n      rowKey: \"id\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(AdditionEmployeeForm, {\n      addNewFormInstance: form,\n      isVisible: isAddingNewEmployee,\n      isAddingEmployee: isAddingEmployee,\n      handleCloseModal: handleCloseModal,\n      handleAddNew: handleAddNewEmployee\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Management, \"Ng8U2ygiXIgBYMY8oF8OnVJ7hns=\", false, function () {\n  return [useFetchWithPagination, Form.useForm, useMutation];\n});\n\n_c = Management;\nexport default Management;\n\nvar _c;\n\n$RefreshReg$(_c, \"Management\");","map":{"version":3,"sources":["C:/Users/aly.hanafi/Downloads/hhg-fe-coding-assignment/hhg-fe-coding-assignment/src/pages/Management/index.tsx"],"names":["Breadcrumb","Form","message","Table","React","useCallback","useEffect","useState","PAGE_SIZE","useFetchWithPagination","useMutation","addNewEmployee","listEmployees","columns","AdditionEmployeeForm","Management","isAddingNewEmployee","setIsAddingNewEmployee","handleCloseModal","handleOpenModal","page","setPage","goToFirstPage","isLoading","data","refetch","refetchEmployees","handleAfterAddNewEmployee","handleTableChange","config","current","form","useForm","request","handleAddNewEmployee","isAddingEmployee","apiCallback","onFailure","error","onSuccess","success","onFinish","resetFields","document","title","pageSize","total","showSizeChanger"],"mappings":"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","sourcesContent":["import { Breadcrumb, Form, message, Table } from \"antd\";\r\nimport React, { useCallback, useEffect, useState } from \"react\";\r\nimport { PAGE_SIZE } from \"../../constants\";\r\nimport { useFetchWithPagination, useMutation } from \"../../hook\";\r\nimport { addNewEmployee, listEmployees } from \"../../services/employeeServices\";\r\nimport columns from \"./columns\";\r\nimport AdditionEmployeeForm from \"./components/AdditionEmployeeForm\";\r\n\r\nconst Management = () => {\r\n\tconst [isAddingNewEmployee, setIsAddingNewEmployee] =\r\n\t\tuseState(false);\r\n\r\n\tconst handleCloseModal = useCallback(() => {\r\n\t\tsetIsAddingNewEmployee(false);\r\n\t}, [setIsAddingNewEmployee]);\r\n\r\n\tconst handleOpenModal = useCallback(() => {\r\n\t\tsetIsAddingNewEmployee(true);\r\n\t}, [setIsAddingNewEmployee]);\r\n\r\n\t// fetch employees\r\n\tconst {\r\n\t\tpage,\r\n\t\tsetPage,\r\n\t\tgoToFirstPage,\r\n\t\tisLoading,\r\n\t\tdata,\r\n\t\trefetch: refetchEmployees,\r\n\t} = useFetchWithPagination(listEmployees);\r\n\r\n\tconst handleAfterAddNewEmployee = useCallback(() => {\r\n\t\tif (page === 1) {\r\n\t\t\trefetchEmployees();\r\n\t\t} else {\r\n\t\t\tgoToFirstPage();\r\n\t\t}\r\n\t}, [goToFirstPage, refetchEmployees, page]);\r\n\r\n\tconst handleTableChange = useCallback(\r\n\t\t(config) => {\r\n\t\t\tconst { current } = config;\r\n\t\t\tsetPage(current);\r\n\t\t},\r\n\t\t[setPage]\r\n\t);\r\n\r\n\t// Add new employee\r\n\tconst [form] = Form.useForm();\r\n\r\n\tconst { request: handleAddNewEmployee, isLoading: isAddingEmployee } =\r\n\t\tuseMutation({\r\n\t\t\tapiCallback: addNewEmployee,\r\n\t\t\tonFailure: () => {\r\n\t\t\t\tmessage.error(\"Add new employee fail!\");\r\n\t\t\t},\r\n\t\t\tonSuccess: useCallback(() => {\r\n\t\t\t\thandleAfterAddNewEmployee();\r\n\t\t\t\tmessage.success(\"Add new employee successfully!\");\r\n\t\t\t}, [handleAfterAddNewEmployee]),\r\n\t\t\tonFinish: () => {\r\n\t\t\t\tform.resetFields();\r\n\t\t\t\thandleCloseModal();\r\n\t\t\t},\r\n\t\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = \"Employee Management\";\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Breadcrumb>\r\n\t\t\t\t<Breadcrumb.Item href=\"/\">\r\n\t\t\t\t\tğŸ \r\n\t\t\t\t</Breadcrumb.Item>\r\n\t\t\t\t<Breadcrumb.Item>Employees Management</Breadcrumb.Item>\r\n\t\t\t</Breadcrumb>\r\n\t\t\t<div className=\"management__table-header\">\r\n\t\t\t\t<h1 className=\"management__table-header__title\">Employees</h1>\r\n\t\t\t\t<button type=\"button\" className=\"btn--cta\" onClick={handleOpenModal}>\r\n\t\t\t\t\t+ New\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<Table\r\n\t\t\t\tdataSource={data?.data}\r\n\t\t\t\tloading={isLoading}\r\n\t\t\t\tcolumns={columns}\r\n\t\t\t\tpagination={{\r\n\t\t\t\t\tpageSize: PAGE_SIZE,\r\n\t\t\t\t\ttotal: data?.total || 0,\r\n\t\t\t\t\tcurrent: page,\r\n\t\t\t\t\tshowSizeChanger: false,\r\n\t\t\t\t}}\r\n\t\t\t\tsize=\"small\"\r\n\t\t\t\tonChange={handleTableChange}\r\n\t\t\t\trowKey=\"id\"\r\n\t\t\t/>\r\n\t\t\t<AdditionEmployeeForm\r\n\t\t\t\taddNewFormInstance={form}\r\n\t\t\t\tisVisible={isAddingNewEmployee}\r\n\t\t\t\tisAddingEmployee={isAddingEmployee}\r\n\t\t\t\thandleCloseModal={handleCloseModal}\r\n\t\t\t\thandleAddNew={handleAddNewEmployee}\r\n\t\t\t/>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default Management;\r\n"]},"metadata":{},"sourceType":"module"}